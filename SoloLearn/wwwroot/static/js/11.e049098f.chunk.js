webpackJsonp([11],{6989:function(e,t,n){"use strict";function s(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function s(r,o){try{var a=t[r](o),u=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(u).then(function(e){s("next",e)},function(e){s("throw",e)});e(u)}return s("next")})}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u,i,c,l=n(38),p=n.n(l),m=n(0),f=n.n(m),d=n(81),h=n.n(d),y=n(19),v=n(16),b=n(43),g=n(10),C=n(561),w=n(7),L=n(12),x=n(39),k=n(293),O=n(586),E=n(7469),P=n(7472),N=(n.n(P),function(){function e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}()),j=function(e){return{activeLesson:e.slay.activeLesson,lessonsByUser:e.slay.lessonsByUser}},_={getLesson:k.d,getCourseLesson:k.c,getLessonsByAuthor:k.f},I=(u=Object(y.b)(j,_),i=Object(v.b)(),u(c=i(c=function(e){function t(){var e=this;r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.loadCommentsCount=s(p.a.mark(function t(){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=n.props.params.itemType,e.next="course-lesson"===e.t0?3:"user-lesson"===e.t0?10:17;break;case 3:return e.t1=n,e.next=6,n.loadCourseLessonCommentsCount();case 6:return e.t2=e.sent,e.t3={commentsCount:e.t2},e.t1.setState.call(e.t1,e.t3),e.abrupt("break",18);case 10:return e.t4=n,e.next=13,n.loadUserLessonCommentsCount();case 13:return e.t5=e.sent,e.t6={commentsCount:e.t5},e.t4.setState.call(e.t4,e.t6),e.abrupt("break",18);case 17:throw new Error("Could not find lesson type");case 18:case"end":return e.stop()}},t,e)})),n.loadUserLessonCommentsCount=s(p.a.mark(function t(){var s,r,o;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=n.props.activeLesson.id,e.next=3,x.b.request("Discussion/GetUserLessonCommentCount",{lessonId:s});case 3:return r=e.sent,o=r.count,e.abrupt("return",o);case 6:case"end":return e.stop()}},t,e)})),n.loadCourseLessonCommentsCount=s(p.a.mark(function t(){var s,r,o;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=n.props.activeLesson.parts[n.props.params.pageNumber-1].id,e.next=3,x.b.request("Discussion/GetLessonCommentCount",{quizId:s});case 3:return r=e.sent,o=r.count,e.abrupt("return",o);case 6:case"end":return e.stop()}},t,e)})),n.loadLesson=function(){var t=s(p.a.mark(function t(s){var r,o,a,u,i,c;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=n.props,o=r.getCourseLesson,a=r.getLesson,u=n.props.params.itemType,i=void 0===u?1:u,n.setState({loading:!0}),e.t0=i,e.next="course-lesson"===e.t0?6:"user-lesson"===e.t0?12:18;break;case 6:return e.next=8,o(s);case 8:return e.next=10,n.getLessonsByAuthor();case 10:return n.setState({loading:!1}),e.abrupt("break",19);case 12:return e.next=14,a(s);case 14:return e.next=16,n.getLessonsByAuthor();case 16:return n.setState({loading:!1}),e.abrupt("break",19);case 18:return e.abrupt("break",19);case 19:c=n.props.activeLesson.name,n.loadCommentsCount(),document.title=""+c,n.props.activeLesson.parts?h.a.ga("send","screenView",{screenName:"Course Lesson Lesson Page"}):h.a.ga("send","screenView",{screenName:"Lesson Page"});case 23:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.getCommentsId=function(){var e=n.props,t=e.params,s=e.activeLesson;switch(t.itemType){case"course-lesson":return s.parts[t.pageNumber-1].id;case"user-lesson":return s.id;default:throw new Error("Unkown lesson type")}},n.getCommentsType=function(){switch(n.props.params.itemType){case"course-lesson":return"lesson";case"user-lesson":return"userLesson";default:throw new Error("Unkown lesson type")}},n.getLessonsByAuthor=s(p.a.mark(function t(){var s,r,o,a,u;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=n.props,r=s.activeLesson,o=s.getLessonsByAuthor,a=r.id,u=r.userID,e.next=4,o(a,u,{index:0,count:10});case 4:case"end":return e.stop()}},t,e)})),n.goToNextLesson=function(){var e=n.props,t=e.activeLesson,s=e.params,r=s.pageNumber,o=(t.id,t.name,t.parts),a=t.nextLesson,u="/learn/lesson/"+(3===a.itemType?"course-lesson":"user-lesson");o&&r<o.length?b.e.push(u+"/"+n.props.activeLesson.id+"/"+Object(g.A)(n.props.activeLesson.name,100)+"/"+(Number(r)+1)):b.e.push(u+"/"+a.id+"/"+Object(g.A)(a.name,100)+"/1")},n.handleStepClick=function(e){var t=n.props,s=t.params,r=t.activeLesson,o="/learn/lesson/"+s.itemType;b.e.push(o+"/"+r.id+"/"+Object(g.A)(r.name,100)+"/"+(Number(e)+1))},n.state={loading:!1,commentsCount:null},n}return a(t,e),N(t,[{key:"componentWillMount",value:function(){var e=this.props.params.lessonId;this.loadLesson(e)}},{key:"componentWillReceiveProps",value:function(){function e(e){return t.apply(this,arguments)}var t=s(p.a.mark(function e(t){var n,s;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=t.params,s=this.props.params,n.lessonId!==s.lessonId?this.loadLesson(n.lessonId):n.pageNumber!==s.pageNumber&&(this.setState({commentsCount:null}),this.loadCommentsCount());case 3:case"end":return e.stop()}},e,this)}));return e}()},{key:"render",value:function(){var e=this.state,t=e.loading,n=e.commentsCount,s=this.props,r=s.t,o=s.lessonsByUser,a=s.activeLesson,u=s.params,i=u.pageNumber,c=a||{},l=c.id,p=c.date,d=c.type,h=c.parts,y=c.level,v=c.name,b=c.badge,g=c.userID,x=c.content,k=c.language,P=c.itemType,N=c.comments,j=c.userName,_=c.avatarUrl,I=c.nextLesson,T=c.isBookmarked,S=c.relevantLessons,B={level:y,badge:b,userID:g,avatarUrl:_,name:j,id:g},R=!t&&(h&&i<h.length||I);return f.a.createElement(L.m,{sidebar:t?f.a.createElement(L.e,{loading:!0}):f.a.createElement(O.a,{id:l,userID:g,userName:j,nextLesson:I,lessonsByUser:o,relevantLessons:S})},f.a.createElement(w.h,null,t?f.a.createElement(L.e,{loading:!0,paper:!0}):f.a.createElement(m.Fragment,null,f.a.createElement(w.y,null,f.a.createElement(w.i,{column:!0,fullWidth:!0,className:"slay-lesson-container"},f.a.createElement(E.a,{t:r,date:p,type:d,name:v,parts:h,withAuthorInfo:!0,userData:B,itemType:P,textContent:x,pageNumber:i,activeLesson:a,courseLanguage:k,commentsCount:N,isBookmarked:T,handleStepClick:this.handleStepClick}),R&&f.a.createElement(L.t,{color:"secondary",onClick:this.goToNextLesson},r("learn.buttons-continue")))),null!==n&&f.a.createElement(C.a,{key:this.getCommentsId(),id:this.getCommentsId(),type:1,commentsType:this.getCommentsType(),commentsCount:n}))))}}]),t}(m.PureComponent))||c)||c);t.default=I},7469:function(e,t,n){"use strict";function s(e,t){var n={};for(var s in e)t.indexOf(s)>=0||Object.prototype.hasOwnProperty.call(e,s)&&(n[s]=e[s]);return n}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u=n(0),i=n.n(u),c=(n(43),n(7)),l=n(12),p=n(55),m=n(205),f=n(513),d=(n(10),n(7470)),h=(n.n(d),n(590)),y=function(){function e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}(),v=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.toggleReportPopup=function(){n.setState(function(e){return{isReportPopupOpen:!e.isReportPopupOpen}})},n.state={isReportPopupOpen:!1},n}return a(t,e),y(t,[{key:"render",value:function(){var e=this.props,t=e.t,n=e.parts,r=e.lessonId,o=e.handleStepClick,a=this.state.isReportPopupOpen,d=this.props,y=d.textContent,v=d.pageNumber,b=s(d,["textContent","pageNumber"]),g=Number(v||1)-1;return i.a.createElement(u.Fragment,null,i.a.createElement(c.i,{className:"slay_lesson-step-container",fullWidth:!0,justify:!0,align:!0},n&&n.length>1&&i.a.createElement(c.M,{width:3*n.length+5*(n.length-1)+"%",className:"slay-lesson-stepper slay-lesson-align-left"},n.map(function(e,t){return i.a.createElement(c.K,{text:t+1,key:e.id,active:g===t,completed:g>t,onClick:function(){return o(t)}})})),i.a.createElement(l.h,{iconProps:{className:"slay-lesson-align-left"},icon:p.r},i.a.createElement(c.v,{onClick:this.toggleReportPopup},t("common.report-action-title")))),i.a.createElement(h.a,Object.assign({key:n?n[g].id:r},b,{textContent:n?n[g].textContent:y})),i.a.createElement(f.a,{itemId:r,open:a,itemType:m.a.lesson,onClose:this.toggleReportPopup}))}}]),t}(u.Component);t.a=v},7470:function(e,t,n){var s=n(7471);"string"===typeof s&&(s=[[e.i,s,""]]);var r={hmr:!0};r.transform=void 0,r.insertInto=void 0;n(6)(s,r);s.locals&&(e.exports=s.locals)},7471:function(e,t,n){t=e.exports=n(5)(void 0),t.push([e.i,".slay_lesson-step-container .slay-lesson-align-left {\n  margin-left: auto; }\n\n.slay_lesson-step-container .RSPBprogressBar {\n  flex: 0 1 auto;\n  margin-left: auto; }\n",""])},7472:function(e,t,n){var s=n(7473);"string"===typeof s&&(s=[[e.i,s,""]]);var r={hmr:!0};r.transform=void 0,r.insertInto=void 0;n(6)(s,r);s.locals&&(e.exports=s.locals)},7473:function(e,t,n){t=e.exports=n(5)(void 0),t.push([e.i,".slay-lesson-container {\n  align-items: flex-end; }\n",""])}});
//# sourceMappingURL=11.e049098f.chunk.js.map